<div class="row page-enter">
  <div class="col-3">
    {{> sidebar}}
  </div>

  <div class="col-9">
    <!-- ===== Header ===== -->
    <div class="d-flex justify-content-between align-items-center mb-3">
      <h3 class="fw-bold mb-0">
        <i class="bi bi-person-circle text-primary me-2"></i> Student Detail
      </h3>
      <a href="/admin/students" class="btn btn-outline-secondary">
        <i class="bi bi-arrow-left"></i> Back
      </a>
    </div>

    <!-- ===== Student Info ===== -->
    <div class="card border-0 shadow-sm mb-4 student-card">
      <div class="card-body d-flex flex-wrap align-items-center gap-3">
        <img src="https://cdn-icons-png.flaticon.com/512/1946/1946429.png"
             alt="Avatar" class="rounded-circle border"
             style="height:80px;width:80px;object-fit:cover;">
        <div class="flex-grow-1">
          <div class="h5 mb-1 fw-semibold">{{student.name}}</div>
          <div class="text-muted">
            <i class="bi bi-envelope me-1"></i>{{student.email}}
          </div>
          <div class="mt-1 small">
            <span class="text-muted me-2"><i class="bi bi-clock-history me-1"></i>Joined:</span>
            {{formatDate student.created_at "DD/MM/YYYY HH:mm"}}
          </div>
        </div>

        <div>
          {{#if student.is_available}}
            <span class="badge bg-success-subtle text-success border border-success-subtle px-3 py-2">
              <i class="bi bi-check-circle me-1"></i> Available
            </span>
          {{else}}
            <span class="badge bg-secondary px-3 py-2">
              <i class="bi bi-lock me-1"></i> Locked
            </span>
          {{/if}}
        </div>
      </div>
    </div>

    <!-- ===== Recent Enrollments ===== -->
    <div class="d-flex justify-content-between align-items-center mb-2">
      <h5 class="fw-semibold mb-0">
        <i class="bi bi-journal-bookmark text-primary me-2"></i>Recent Enrollments
      </h5>
      <span class="text-muted small">Total: {{enrolls.length}}</span>
    </div>

    {{#if enrolls.length}}
      <div class="table-responsive card border-0 shadow-sm table-enter">
        <table class="table table-hover align-middle mb-0">
          <thead class="table-light">
            <tr>
              <th style="width:60px;">#</th>
              <th>Course</th>
              <th>Category</th>
              <th>Instructor</th>
              <th style="width:160px;">Purchased</th>
            </tr>
          </thead>
          <tbody>
            {{#each enrolls}}
              <tr>
                <td>{{inc @index}}</td>
                <td>
                  <a href="/courses/{{this.course_id}}" target="_blank" class="fw-semibold text-decoration-none">
                    {{this.course_title}}
                  </a>
                </td>
                <td>{{#if this.category}}{{this.category}}{{else}}—{{/if}}</td>
                <td>{{#if this.instructor}}{{this.instructor}}{{else}}—{{/if}}</td>
                <td class="text-muted small">{{formatDate this.purchased_at "DD/MM/YYYY HH:mm"}}</td>
              </tr>
            {{/each}}
          </tbody>
        </table>
      </div>
    {{else}}
      <div class="alert alert-info mt-3">
        <i class="bi bi-info-circle me-2"></i>No enrollments yet.
      </div>
    {{/if}}
  </div>
</div>

<!-- ===== CSS & Motion ===== -->
<style>
  @media (prefers-reduced-motion:no-preference){
    .page-enter{animation:fadeUp .4s ease-out both}
    .table-enter{animation:fadeUp .45s .05s ease-out both}
  }
  @keyframes fadeUp{
    from{opacity:0;transform:translateY(8px)}
    to{opacity:1;transform:none}
  }

  .student-card:hover{
    box-shadow:0 0.5rem 1rem rgba(0,0,0,0.05);
    transition:box-shadow .3s ease;
  }
  .table tbody tr:hover{
    background:rgba(13,110,253,.05);
    transition:background .2s ease;
  }
  .badge{font-size:.85rem;padding:.5em .8em}
  .btn-sm i{vertical-align:-1px}
</style>
